

分布式数据库
------------

#### NewSQL 和 Distributed SQL

NewSQL 是基于 NoSQL 模式构建的分布式数据库，它通常采用现有的 SQL 类关系型数据库为底层存储或自研引擎，并在此之上加入分布式系统，从而对终端用户屏蔽了分布式管理的细节。Citus 和 Vitess 就是此种类型的两个著名案例

#### 分片算法

有手动分片和自动分片

TiDB 就是一个垂直与水平分片融合的典型案例，同时该方案也是 HATP 融合方案。

#### 数据复制

单主复制与多主复制

#### 设计数据库

首先要了解使用场景，从同步和分片两方面去考虑，同步就是考虑一致性，需不需要强一致性，分片就是高可用性和扩展性，数据库如何去扩展，

#### 存储引擎

1. 事务管理器：用来调度事务并保证数据库的内部一致性（这与模块一中讨论的分布式一致性是不同的）；
2. 锁管理：保证操作共享对象时候的一致性，包括事务、修改数据库参数都会使用到它；
3. 存储结构：包含各种物理存储层，描述了数据与索引是如何组织在磁盘上的；
4. 内存结构：主要包含缓存与缓冲管理，数据一般是批量输入磁盘的，写入之前会使用内存去缓存数据；
5. 提交日志：当数据库崩溃后，可以使用提交日志恢复系统的一致性状态。

**内存型数据库会倾向于选择分布式模式来进行构建**

**列式存储也与分布式数据库存在天然的联系**
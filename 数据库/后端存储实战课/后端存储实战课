01.创建和更新订单时，如何保证数据准确无误？
-------------------------------------------

##### 避免重复下单

用户下单，可能手抖一下连续点击两次，那么就有可能发送两个HTTP请求。除此之外，RPC 框架、网关都会有自动重试机制，所以如何避免重复下单是个需要解决的问题。

解决办法是，让你的订单服务**具备幂等性**，如何具备幂等性；

1.   查找重复的订单，但是对于下单商品属性没有办法去用一个属性去判断，因为可能同一时间一个用户下两单也有可能
2.   可以利用数据库的这种“主键唯一约束”特性，在插入数据的时候带上主键，来解决创建订单服务的幂等性问题。给订单系统增加一个“生成订单号”的服务，**返回值就是一个新的、全局唯一的订单号**。在用户**进入创建订单**的页面时，**前端页面**先调用这个生成订单号服务**得到一个订单号**，在用户提交订单的时候，在创建订单的请求中带着这个订单号。这个订单号也是我们订单表的主键，这样，无论是用户手抖，还是各种情况导致的重试，这些重复请求中带的都是同一个订单号。数据库的唯一约束就可以保证，只有一次 INSERT 语句是执行成功的。

##### 如何解决 ABA 问题？

增加版本号

07｜MySQL HA
------------

##### 数据备份和恢复怎么做

**全量备份：**使用mysqldump命令，将所有的数据转换成SQL语句存入文件中，但是全量备份文件包含数据库中的所有数据，占用的磁盘空间非常大；其次，每次备份操作都要拷贝大量数据，备份过程中会占用数据库服务器大量的 CPU、磁盘 IO 资源，并且为了保证数据一致性，还有可能会锁表，这些都会导致备份期间，数据库本身的性能严重下降。

**增量备份：**binLog，使用全量备份+Binlog日志可以将数据库恢复到任意一个时间



##### MySQL HA

使用主从Mysql，



09 | 怎么能避免写出慢SQL？
--------------------------

MySQL 中单个表数据量，也要尽量控制在一千万条以下，最多不要超过二三千万这个量级


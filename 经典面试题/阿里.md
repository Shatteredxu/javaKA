*   [x] 1.synchronized升级过程 

*   [x] 2.synchronized和reentranlock的区别 

*   [ ] 3.常见设计模式的应用场景讲一下，注意不是让你说有哪些设计模式，而是项目之中的具体应用 

*   [ ] 4.设计一张表，你会怎样设计索引 

*   [x] 5.java锁再说一下应用场景，举个具体的场景 

*   [x] 6.大型复杂项目之中，不停进行内存回收，jvm怎么调优  [基本调优方法](../深入理解JVM\JVM调优案例.md)

*   [ ] 7.大型复杂项目之中，你怎么设计数据库，java代码，缓存 

*   [x] 8.数据库之中有哪些锁 

*   [x] 9.说一下进程和线程的区别 

*   [x] 10.说一下死锁 

*   [x] 11.看你很了解分布式，说一下分布式，说了redis一致性哈希,redis-cluster 

*   [x] 12.公平锁，非公平锁，可重入锁等。 

*   [x] 13.hashmap和concurrenthashmap的区别，原理(注意jdk版本不同concurrenthashmap实现不同) 

*   [ ] HashMap和hashTable

    >   hashtable是加了锁的hashmap，初始容量为11，且并不要求为2的幂次方，采用拉链法避免hash冲突，计算hash值的方法也与hashmap不同，Hashtable既不支持Null key也不支持Null value，在HashMap中不能由get()方法来判断HashMap中是否存在某个键， 而应该用containsKey()方法来判断。

##### 一面

*   [x] 1.挑几个点讲一下论坛项目，包括  遇到的问题，怎么解决。  

*   [x] 2.Redis存的什么数据？会有在MySQL和  Redis都存的冗余数据吗？怎么保证一致性？  

*   [x] 3.MySQL去更新  Redis的数据时出错，该怎么办？换成删除的策略后，删除时还是会失败，还能怎么做？ //面试官回答：binlog。  

*   [ ] 4.ES倒排索引为什么能够加速搜索？  

*   [ ] 5.讲一下项目中难的计数点。  

*   [x] 6.登录注册是如何实现的？用Cookie做了什么？  Cookie被窃取了该怎么办？  

*   [x] 7.MySQL索引怎么实现的？MySQL是怎么加速一条SELECT的SQL语句，怎么通过索引来加速得到查询结果？ // 我的回答是  覆盖索引，而面试官说应该回答到B+Tree这个数据结构的优势，相对直接在磁盘里找数据，能够极大减少磁盘IO的次数  

    >   覆盖索引：减少回表，适配更多的使用索引的情况
    >
    >   索引下推ICP：索引下推在**非主键索引**上的优化，可以有效减少回表的次数，大大提升了查询的效率。

*   [x] 8.安防项目有哪些挑战点？  

*   [x] 9.讲一下研究生阶段研究的任务调度[算法]()。介绍下研究背景。  

*   [x] 10.讲一下本硕计算机专业中你感兴趣的课程。  

*   [x] 11.你觉得目前JVM的垃圾回收算法中最好的是哪个？讲一下  垃圾回收[算法]()。  

*   [x]    12.JVM为什么有新生代老年代之分？  

#####    4.22二面  

   电话面55分钟  

*   [x] 1.介绍下学校里研究的内容。数据是怎么获取的？算法实际的运行效果怎么样？对比了哪些算法？  

*   [x] 2.写完论文后，后续任务调度方面还会做哪些了解？ZooKeeper，k8s这些有了解吗？  

*   [x] 3.讲一下论坛  项目的功能和亮点。  

*   [x] 4.为什么选MySQL作为数据库？  

*   [x] 5.InnoDB和MyISAM的区别。  

*   [x] 6.死锁是怎么发生的？如何避免死锁？  

    >   死锁预防：破坏死锁的四个必要条件，互斥，占有且等待，不可抢占，循环等待
    >
    >   死锁避免：银行家算法
    >
    >   死锁解除：回收资源或者撤销或者挂起一些进程

*   [x] 7.B+Tree和BTree的区别。  

    >   1.   B-Tree的关键字，指针和数据都是存储在一起的，而B+Tree的非子叶只存储指针和关键字。数据存储在子叶节点中
    >   2.   在B-Tree中越靠近根节点的数据查询的速度越快，在B+Tree中每个数据记录的查找时间几乎相同。每次查询都需要从根节点走到叶节点。在实际使用中B+Tree的性能更好。因为B+Tree的非子叶节点不存储数据，每个节点能够存储更多的键值，能过减少磁盘的访问次数，一次磁盘的访问次数相当于很多次的内存比较次数。所以B+Tree使用性能更高

*   [ ] 8.论坛项目为什么用Redis来存点赞和关注的数据？ //答：点赞需要存的属性就只有点赞者和被点赞者，且Redis可以实现统计点赞数，和点击两次取消点赞的功能。  

*   [ ] Redis统计在线人数

    >   HyperLogLog，

*   [x] 9.有没有做过压测，并发量有多少？  

*   [x] 10.Cookie和Session的区别。  

*   [x] 11.分布式Session如何管理？  

*   [x] 13.项目这里还有补充吗？   //答：ThreadLocal类实现多线程的资源隔离。  

*   [x] 14.Java中的HashMap是怎么实现的？是线程安全的吗？什么数据结构是线程安全的？讲一下分段锁。  

*   [x] 15.ArrayList和LinkedList的区别。  

*   [ ] 16.你觉得Spring上有什么吸引你的点？ //答：bean可重用组件。  

#####      4.25三面

*   [x] ​     1.论坛用到的技术，实现的功能展开讲一下。    

*   [x] ​     2. ES倒排索引。    

*   [x] ​     3.MySQL分布式如何实现的？    

    >   分库分表+主从+读写分离+BinLog同步；

*   [x] ​     4.安防项目结合业务展开讲一下。你做的第三方服务的接入，在整个项目调用链路中是怎么样的？收费模式是怎么样的？    

*   [x] ​     5.两个项目技术点上有什么区别？讲一下有特色的地方。    

*   [x] ​     6.研究生阶段研究内容讲一下。数据是如何做存储和处理的？    

*   [x] ​     7.学习一门新的领域用什么方法？    

*   [x] ​     8.写的博客是什么方向的？    

*   [x] ​     9.比较感兴趣的中间件是什么方向的？    

*   [x] ​     10.ZooKeeper主要是用在什么场景？

##### 2021年2月25日 周四 部门C 一面（通过）

*   [x] RPC调用的过程 

    >   1.   启动RpcProvider，由Netty创建boss,worker两个EventLoopGroup，创建NioServerSocketChannel，childHandler(编码器，解码器，接受并解析请求的Handler)，绑定端口
    >
    >   2.   实现BeanPostProcessor接口(在bean实例化之后，初始化前后做一些事情)，去扫描@RpcService注解，然后发往注册中心进行注册（名称、版本、地址和端口号），同时存入HashMap中做缓存
    >
    >   3.   启动RpcConsumer，
    >
    >   4.   当请求URL的时候，先到controller，发起 RPC 调用之前，先创建Bootstrap，NioEventLoopGroup，NioSocketChannel，Handler(编码器，解码器，发送器请求handler)，然后调用注册中心服务 RegistryService 的 discovery() 方法(默认是采用一致性 Hash 算法实现的服务发现)这里有一个小技巧，为了尽可能使所有服务节点收到的请求流量更加均匀，需要为 discovery() 提供一个 invokerHashCode，一般可以采用 RPC 服务接口参数列表中第一个参数的 hashCode 作为参考依据。找到服务节点地址后，接下来通过 Netty 建立 TCP 连接，然后调用 writeAndFlush() 方法将数据发送到远端服务节点。
    >
    >        再次回到 invoke() 方法的主流程，发送 RPC 远程调用后如何等待调用结果返回呢？我们介使用 Netty 提供的 Promise 工具来实现 RPC 请求的同步等待，Promise 模式本质是一种异步编程模型，我们可以先拿到一个查看任务执行结果的凭证，不必等待任务执行完毕，当我们需要获取任务执行结果时，再使用凭证提供的相关接口进行获取。
    >
    >   5.   服务器接收到发送来的请求，经过Handler解码为MiniRpcProtocol ，再交由 RpcRequestHandler 执行 RPC 请求调用，在RpcRequestHandler中调用handle方法，handle方法使用fastClass传入参数调用发方法，最后返回。
    >
    >   

*   [x] 项目中遇到的困难 

    >   1.   项目整体实现，动态代理方法两端都需要调用，使用异步了之后消息怎么区分
    >   1.   线程池创建采用单例模式，没有的话就会导致创建很多线程池，占用内存
    >   2.   zookeeper连接问题
    >   2.   Netty创建channel线程池，

*   [x]  实习慢SQL调优 

*   [x]  什么是死信和延迟队列 

*   [x]  使用的业务场景？ 

*   [x]  类加载过程 

*   [x]  啥时候破坏双亲委派 

*   [x]  线程类加载器实现原理 

*   [x]  HashMap数据结构，插入过程，扰动函数 

*   [x]  ConcurentHashMap如何保证线程安全 

*   [x]  synchronized 

*   [x] new一个对象的过程 

    >   加载，验证，准备（静态变量分配空间，附初始值），解析(符号引用->直接引用)，初始化(先父后子，为静态变量，static代码块赋值)，创建对象(**在堆区分配对象需要的内存**,**对所有实例变量赋默认值**,**执行实例初始化代码**)(还是先父类在子类)->将堆中创建的对象指向新创建的对象

*   [x]  JVM内存模型 

*   [x]  MinorGC和FullGC发生场景 

*   [x]  新生代对象啥时候晋升老年代 

*   [x]  TCP三次握手四次挥手 

*   [x]  Time_wait的作用 

*   [x]  为啥握手是三次而挥手是四次 

*   [x]  MySQL中索引的数据结构 

*   [x]  B+树和B树区别 

*   [ ] BeanFactory和FactoryBean的区别 

    >   BeanFactory是个Factory，也就是IOC容器或对象工厂，FactoryBean是个Bean。在Spring中，**所有的Bean都是由BeanFactory(也就是IOC容器)来进行管理的**。但对FactoryBean而言，**这个Bean不是简单的Bean，而是一个能生产或者修饰对象生成的工厂Bean,它的实现与设计模式中的工厂模式和修饰器模式类似** ，**用户可以通过实现该接口定制实例化Bean的逻辑**。

*   [ ]  Spring如何解决循环依赖 

*   [ ]  SpingIOC注入对象过程 

*   [ ]  Spring三级缓存机制 

*   [ ]  消息队列如何保证消息被消费到 

*   [ ]  如何检测网络抖动导致的数据丢失 

*   [ ]  大数据量查询如何优化效率 

*   [x]  分库分表的设计思路 

*   [x]  线程池处理任务的过程 

*   [x]  四大拒绝策略 

*   [ ]  AOP的实现原理 

#####    2021年2月26日 周六 部门A 一面（通过）  

*   [x] 1.慢sql优化 

*   [x] 2.介绍消息队列整体架构 

*   [x] 3.死信队列，延迟消费（如何实现延时策略，多次失败控制） 

*   [x] 4.如何保证消息消费的幂等性 

*   [x] 5.如何保证分布式系统中数据库插入的幂等性 

*   [x] 6.介绍跳表数据结构 

*   [x] 7.redis为啥用跳表不用B+树 

    >   B+树需要进行页分裂，可能会影响性能，而且跳表结构比较简单

*   [ ] 8.如果让你设计一个服务注册中心，怎么设计 

*   [ ] 9.追问：服务注册信息的拆分要怎么做，如果注册中心服务器宕机怎么保证高可用，服务注销怎么实现 

*   [ ] 10.Netty中的select过程 

    >   

*   [x] 11.Netty为啥效率高（零拷贝，线程模型） 

* [x] 12.零拷贝讲讲（mmap优化，sendfile） 

  

*   [x] 13.TCP拥塞控制（慢启动，快速重传，快速恢复） 

*   [ ] 14.SpringBoot启动过程 

*   [ ] 15.算法 LC30（hard）的加强版 

*   [x] 16.算法 反转双向链表

*   [x]  17.反问，部门偏业务还是技术  

#####  2021年2月26日 周六 部门B 一面（通过） 

*   [x]  慢sql优化 

*   [x]  如果起十个线程收集数据，其中一个卡住了咋办 

*   [x]  RPC调用中服务注册怎么做的 

*   [x]  服务注册怎么进行服务注销监听 

    

*   [x]  服务注册中心的功能除了放在额外的服务器上实现还能放在哪里？怎么实现 

*   [x]  RPC调用中如果出错怎么处理 

*   [x]  RPC框架写了多少行 

*   [x]  在美团实习写代码写了多少行 

*   [x]  在美团实习有啥收获 

*   [x]  讲讲sychronized(偏向锁，锁升级，轻量级锁，锁膨胀，批量重偏向，对象头中epoch字段的作用，锁消除) 

*   [x]  讲讲volatile(可见性怎么保证，有序性怎么保证，内存屏障LL，LR，RR，RL，CPU缓存行，lock汇编指令) 

*   [x]  反问，部门业务 

*   [x]  你微信号多少，以后多交流（还有这操作？） 

#####  2021年2月28日 周日 部门B 二面（通过）

*   [x]  RPC调用中使用随机算法和轮转算法做负载均衡的优缺点 

*   [x]  RPC调用中服务器宕机之后发生了什么 

*   [x]  RPC服务注册和服务发现服务注销怎么做的 

    

*   [x]  RPC心跳怎么实现的，是服务端给服务注册中心心跳还是服务端给客户端心跳

    https://kaiwu.lagou.com/course/courseInfo.htm?courseId=516#/detail/pc?id=4941

    >   ##### 注册中心心跳
    >
    >   实现服务优雅下线比较好的方式是采用**主动通知 + 心跳检测**的方案，心跳检测可以由节点或者注册中心负责，例如注册中心可以向服务节点每 60s 发送一次心跳包，如果 3 次心跳包都没有收到请求结果，可以认为该服务节点已经下线。心跳检测通常也是客户端和服务端之间通知对方存活状态的一种机制
    >
    >   ##### 连接空闲检测
    >
    >   客户端可以定时向服务端发送一次心跳包，如果有 N 次没收到心跳数据，可以判断当前服务器已经下线或处于不健康状态。就可以断开当前连接

*   [ ]  讲讲MQ了解多少 

*   [ ]  MQ中如何保证消息消费的幂等性 

*   [ ]  MQ能保证不出现重复消息吗 

*   [ ]  项目中的MQ怎么保证幂等性的 

*   [ ]  实习慢SQL调优介绍下 这样做有啥问题 如果让你再优化呢 

*   [ ]  Java中什么时候会出现线程不安全 

*   [ ]  Java中的锁有哪些 

*   [ ] 锁的状态？ 

*   [ ]  ConcurrentMap解决了HashMap的什么问题 

*   [ ]  讲讲ConcurrentMap 

*   [ ]  讲讲JVM中的堆的分区和作用 

*   [ ]  智力题1:3点15分时针分针夹脚 

*   [ ]  智力题2:一个3升的桶，一个5升的桶，隔4升的水，要求两种方法 

*   [x]  结束：我觉得你基础不错，表达能力不错，也有自己的思考，但是实践经历还是比较欠缺，这边面试通过了，其他的等系统开了之后再跟进吧     

#####  2021年3月1日 周一 部门C 二面(通过) 

*   [ ] 1.对TCP/IP协议的了解 

*   [ ] 2.假设有个包到达服务器网卡之后发生了什么（回答：报头的波形同步时钟，起始帧分界符，MAU模块，MAC模块，检查FCS，知计算机收到了一个包） 

*   [ ] 3.打断+追问：网卡如何通知计算机收到包（回答：扩展总线，中断信号线，中断控制器，中断处理程序，网卡的驱动程序） 

*   [ ] 4.打断+追问：中断处理程序怎么知道调用网卡的驱动程序，不同中断有啥区别（回答：硬件的中断号和相应的驱动程序绑定） 

*   [ ] 5.对于高并发场景怎么处理（开始介绍[Netty]()......） 

*   [ ] 6.介绍NIO 

*   [ ] 7.介绍Reactor 

*   [ ] 8.介绍Proactor(不记得了.......) 

*   [ ] 9.为啥要用异步IO不用多线程，不是一样可以加速吗？ 

*   [ ] 10.如果让你设计一个RPC框架，要设计啥（服务注册中心，负载均衡，无感调用，服务注销） 

*   [ ] 11.如果服务调用过程中服务器突然宕机怎么处理？（答服务注销钩子，心跳检测，二次请求） 

*   [ ] 12.追问，如果插入5个数据，插入完第一个服务器宕机了咋办？（答思路，和服务注册中心维护一个执行偏移量，然后从偏移点继续执行） 

*   [ ] 13.追问，如果连偏移量都还没来得及同步呢（die了，不会） 

*   [ ] 15.慢sql优化？ 

*   [ ] 16.如何解决数据groupby的时候哈希不均衡问题（答：定时任务定时捏合数据，追问，只从sql层面，凉。。。） 

*   [ ] 17.反问：如何学习上述没答出来的问题？（多实践，多看源码） 

*   [ ] 18.反问：今天面试表现如何？（整体还是ok的，可以看出在很多地方有自己的思考） 

    ##### 2021年3月2日 周二 部门A 二面（通过） 

*   [ ]  1.实习过程中的产出 
*   [ ]  2.在校期间的项目 
*   [ ]  3.线上问题怎么排查 
*   [ ]  4.平时咋学习的 
*   [ ]  5.长达40分钟的反问时间 
*   [ ]  6.反问1.如何在面试中拿到更高的评级 
*   [ ]  7.反问2.如何学习 
*   [ ]  8.反问3.如何解决数据groupby的时候哈希不均衡问题？ 
*   [ ]  9.反问4.后续面试有啥准备的建议 
*   [ ]  10.反问5.工作中如何更好的提升自己 
*   [ ]  11.后续的部门交叉面试保持联系 
          

#####        2021年3月3日 周日 部门B 三面（通过）      

纯做题      

*   [ ]  1.算法：最大回文子串
*   [ ]  2.算法：判断回文串
*   [ ]  3.算法：快速排序

2.24 部门 A 预面 64 min (过)
----------------------------

*   [x] 自我介绍

*   [x] 学校的学习和实习的时间是怎么分配的?

*   [x] 实习的项目做了什么?遇到的难点?

    >   1.zookeeper连接超时问题
    >
    >   

*   [x] 在实验室做的项目遇到的难点?

*   [x] MySQL 各种索引的一些差异

*   [x] 什么是聚簇索引?什么是非聚簇索引?

*   [ ] Innodb 是怎么保证崩溃恢复能力的?(两阶段日志提交)

*   [ ] Innodb的优缺点?(围绕索引数展开讲)

*   [ ] 索引覆盖?回表?唯一索引?非唯一索引?最左原则?

*   [ ] explain 里面有哪些字段?

    

*   [ ] 一个 SQL 查询很慢,从哪些地方进行优化?

*   [ ] 自增 ID 和 UUID 的区别?(叶分裂)

*   [ ] 自增 ID 申请完了会发生什么事情?

*   [ ] 分库解决了什么问题?分表解决了什么问题?

*   [ ] 你觉得学 Java 需要具备哪些基本条件?哪些地方特别重要?

*   [ ] 七层网络模型

*   [ ] 为什么有了七层还有五层的概念?

*   [ ] JVM 内存模型(概述)

*   [ ] 讲讲双亲委派,为什么?

*   [x] 你觉得双亲委派这个名字有没有什么问题?你讲讲自己的理解

*   [ ] 打破双亲委派的例子,举个例子?怎么打破?

*   [ ] 你现在用什么 GC 收集器?

    >   

*   [ ] Eden 区的对象回收策略?

*   [ ] CMS 的 STW 情况?

*   [ ] CMS 什么情况会触发 Full GC?

*   [ ] 新对象一定会在新生代 new 出来么?

*   [ ] Java8 有什么新的 GC [算法]()?

    

*   [ ] 了解 G1 收集器么?

*   [ ] Golang 和 Java 的区别?

*   [ ] 反问:有什么需要提高的?

2.25 部门 B 一面 50 min (过)
----------------------------

*   [x] 上一次面试问了些什么问题?
*   [x] 啥时候过来实习?
*   [x] 挑一两个你实习或者项目当中遇到的难题?讲一讲怎么解决的?
*   [ ] 项目当中的代码你有没有想过有一些地方可以优化?
*   [ ] 哪些情况会出现 OOM?
*   [ ] 堆中内存分配比例?
*   [ ] 新生代 GC 工作流程?
*   [ ] 为什么新生代年龄是 15 次进入老年代?
*   [ ] 大对象进入老年代,这个大对象是有多大?
*   [ ] 怎么排查 OOM?
*   [ ] 你现在用过哪些中间件?
*   [ ] RPC 了解么?
*   [ ] RPC 解决了现在的哪些问题?
*   [ ] 有没有想过把你的项目改造成 RPC?
*   [ ] IOC 的初始化流程?
*   [ ] AOP是怎么和 IOC 做整合的?
*   [ ] 循环依赖怎么解决?
*   [ ] 项目怎么分层的?
*   [ ] JPA 和 MyBatis 做对象映射的区别?原理?
*   [ ] 数据库热点查询的数据,怎么做性能优化?
*   [ ] Innodb 的索引树数据结构?
*   [ ] 最左原则?
*   [ ] 有没有其他复杂的项目?
*   [ ] 排查问题的手段,你目前知道哪些?
*   [ ] 讲讲你的优势?

3.04 部门 C 一面 72 min (过)
----------------------------

*   [ ] 自我介绍
*   [ ] 介绍一下项目和实习
*   [ ] 你对 RPC 的理解?
*   [ ] HTTP 和 RPC 的关系?区别?
*   [ ] RPC 的优点?
*   [ ] 任何一个请求过来都会打到注册中心么?
*   [ ] 关于项目和实习的一些问题
*   [ ] HDFS 了解么?
*   [ ] Java 的流式处理了解么?
*   [ ] SpringMVC 处理请求的一个流程?
*   [ ] Servlet 的监听器和拦截器?
*   [ ] 有哪些方法可以拦截一个 HTTP 请求?
*   [ ] 关于接受请求的参数,你有没有一套自己总结的方法?
*   [ ] 在学校还做过哪些项目?
*   [ ] 你觉得学 Java,最重要的是什么?
*   [ ] 你对 IOC 的理解?
*   [ ] AOP 的各种实现有什么差异?
*   [ ] 为什么会有多种代理的方式?
*   [ ] HTTPS 的秘钥交换过程?
*   [ ] 有中间人劫持则么办?
*   [ ] 双亲委派的理解?
*   [ ] 为什么有双亲委派?一定要遵循双亲委派么?
*   [ ] 怎么打破双亲委派?
*   [ ] 有一个线程要等待其他线程执行完再执行?
*   [ ] 有一个线程要等待其他线程都就绪再执行?
*   [ ] 顺序打印 ABC?
*   [ ] Innodb 索引的数据结构?为什么用 B+树?
*   [ ] 100 瓶药一瓶毒药.懂得都懂.
*   [ ] [海量数据]()取前 5.

3.04 部门 B 一面 52 min (过)
----------------------------

*   [ ] 自我介绍
*   [ ] 有没有面其他的部门?
*   [ ] 介绍一下自己的实习项目?
*   [ ] 关于项目的一些问题
*   [ ] 你觉得实习做的事情还有没有什么可以优化的?
*   [ ] 为什么 TX 用 Golang?(我怎么知道?)
*   [ ] DNS 解析流程?
*   [ ] 怎样解析一个域名?解析一个域名需要哪些信息?
*   [ ] 为什么用 Nginx?
*   [ ] 你觉得 Nginx 在你的项目中最大的作用是什么?
*   [ ] HTTPS 的秘钥交换过程?
*   [ ] 你觉得使用了 HTTPS 之后还会出现问题么?出现问题了怎么办?
*   [ ] 外挂的 Tomcat 和 SpringBoot 内嵌的 Tomcat 有什么区别?
*   [ ] Tomcat 的设计模式了解么?
*   [ ] SpringBoot 怎么调起Tomcat?
*   [ ] 你对 IOC 的理解?
*   [ ] 实际开发当中你哪些地方使用了 Bean 的前置后置处理器?
*   [ ] AOP 是怎么和 IOC 进行整合的?
*   [ ] Spring 怎么把 Java 对象初始化成 SpringBean 的?
*   [ ] HashMap 八股文讲讲?
*   [ ] 哪些情况下会产生 Full GC?
*   [ ] 方法区的大小怎么设置?
*   [ ] 栈大小怎么设置?
*   [ ] 你遇到过堆栈溢出的情况么?怎么解决的?
*   [ ] MySQl 主从集群怎么搞?
*   [ ] Binlog 有几种?区别是什么?

3.05 部门 B 二面 75 min (过)
----------------------------

*   [ ] 面试官上来花了 10 分钟介绍了他们部门
*   [ ] 关于 Github 上面的项目的问题(这个代码是大二上期写的)
*   [ ] 项目当中的数据库设计,你是怎么做的?
*   [ ] 项目怎么分层的?
*   [ ] 流量打到 SpringMVC 上面之后的处理流程?
*   [ ] 微信小程序登录的流程?
*   [ ] JS SDK 登录和后端请求微信服务器登录的区别?
*   [ ] 你觉得微信登录获得的 raw 信息可以被黑客劫持么?
*   [ ] 你使用过分表么?分库分表分别解决了什么问题?
*   [ ] 分表的时候,怎么设计主键?
*   [ ] 自己的项目当中,用到自定义索引的情况?
*   [ ] 最左原则?联合索引?
*   [ ] 为什么会有最左匹配原则?(根据 B+树[排序]()规则去回答)
*   [ ] 为什么使用 B+树?回表?怎么减少回表?
*   [ ] 数据库的乐观锁和悲观锁?
*   [ ] 读锁和写锁的区别?
*   [ ] 假设现在有一个需求,需要在一个 for 循环里面连续 100 次去更新一个行记录,这个过程中会出现阻塞的情况?怎么使用编码的方式来规避这种情况?(手动继承 AQS)
*   [ ] 怎么关闭长事务?
*   [ ] 为什么想来阿里?
*   [ ] 微服务实例是怎么暂停的?了解么?
*   [ ] 关于实习和项目的一些问题
*   [ ] 线程池 7 个参数的含义?
*   [ ] 线程池提交任务的流程?
*   [ ] 对分布式的了解有多少?

3.05 部门 C 二面 50 min (过)
----------------------------

*   [ ] 一个分布式部署的项目?至少需要哪些模块?
*   [ ] 任何一个流量打过来都会打到注册中心么?
*   [ ] 一个注册中心,至少需要具备哪些条件?
*   [ ] 有一大批流量总是被打到一个实例上面,这个实例的兄弟实例分到的流量很少,怎么办?
*   [ ] 有一个实例挂了怎么办?
*   [ ] 注册中心集群的时候,其中一个注册中心挂了怎么办?
*   [ ] 平时通过哪些渠道学习?
*   [ ] 看过哪些博客?
*   [ ] 你觉得[美团]()的博客上面有哪几篇对你帮助特别大?
*   [ ] 然后具体谈了谈这一篇博客
*   [ ] 你看视频一般在哪儿看?看那些类型的视频?
*   [ ] 能给我推荐一个关于技术的公众号么?
*   [ ] 你有看过阿里的一些技术博客么?你觉得他们写的博客对你有没有帮助?



3.05 部门 A 二面 60 min (过)
----------------------------

*   [ ] 自我介绍
*   [ ] 关于项目和实习的一些问题
*   [ ] HashMap put 里面已经有100000 个数据了,往里面 put 第 100001 个数据会不会扩容?
*   [ ] 你觉得采用[链表]()加[红黑树]()的组合方式之后解决了什么问题?
*   [ ] 那么多数据结构,为什么偏偏使用红黑树?
*   [ ] [红黑树]()的平衡怎么做?
*   [ ] [链表]()转化成[红黑树]()的阈值怎么算出来的?
*   [ ] 为什么[红黑树]()缩回[链表]()的阈值和进化的阈值不一样?
*   [ ] 现在用编码的方式进行代码同步,有哪些方法?
*   [ ] 公平锁和非公平锁的实现(AQS 八股文)
*   [ ] volatile 的特性?
*   [ ] 一个 volatile 变量,一个线程写,多个线程读会不会出现线程不安全的问题?
*   [ ] IOC 的初始化流程?
*   [ ] Java 的类加载过程?
*   [ ] 为什么会有 TIMEWAIT这个状态?
*   [ ] 拥塞控制?流量控制?
*   [ ] 10000 亿条淘宝订单,每条订单当中包含了一个交易流水,流水里面有商品的 ID,有购买数量,同一个商品在这个订单会出现多次,现在要统计销量最好的 10 件商品

3.06 部门 D 一面 70 min (过)
----------------------------

*   [x] 关于实习和项目的问题

*   [x] 讲讲面向对象的一些特性?

*   [x] Java 7 大原则?

    >   1.  单一职责原则:一个类只负责一项职责
    >   2.  开闭原则:对扩展开放，对修改关闭
    >   3.  里氏替换原则:子类可以扩展父类的功能，但不能改变父类原有的功能。
    >   4.  依赖倒置原则: 面向接口编程
    >   5.  接口隔离原则:建立单一接口，尽量细化接口，接口中的方法尽量少
    >   6.  迪米特法则:一个类对自己依赖的类知道的越少越好
    >   7.  组合/聚合复用原则:

*   [x] 面向过程和面向对象的区别?

*   [x] 对象和类的关系?

*   [x] Java 容器八股文

*   [x] HashMap 八股文

*   [x] 进程和线程的区别?

*   [x] Java 创建线程的方式?

*   [x] 线程池参数和任务提交到执行的过程?

*   [x] 对于线程池参数的设定,你有没有自己的一套方案?

    >   **CPU密集型任务：**N（CPU 核心数）+1，比 CPU 核心数多出来的一个线程是为了防止线程偶发的缺页中断
    >
    >   IO密集型：一般两到三倍
    >
    >   **线程数 = CPU 核心数 *（1+平均等待时间/平均工作时间）**

*   [x] 代码的同步怎么做?

*   [x] Java 的类加载过程?什么时候回触发到 Java 类的加载?什么时候回触发类的卸载?

    >   https://blog.csdn.net/cool_summer_moon/article/details/120517951
    >
    >   类加载的最佳时机是解析Java字节码类文件中常量池符号的时候，Class.forName()、ClassLoader.loadClass()、反射API和JNI_FindClass都可以触发类加载，Hot JVM自身启动的时候也会触发类加载。
    >
    >   类卸载：JVM自带的类加载器加载的类不会被卸载，自定义类可能被卸载
    >
    >   *   该类所有的实例对象都已被回收；
    >   *   该类的类加载器对象已经被回收；
    >   *   该类没有在任何地方被引用，无法在任何地方通过反射访问该类的方法。

*   [ ] 双亲委派?打破双亲委派?

    >   为什么需要破坏？
    >
    >   因为在某些情况下<u>父类加载器需要委托子类加载器去加载class文件</u>。受到加载范围的限制，父类加载器无法加载到需要的文件，以Driver接口为例，由于Driver接口定义在jdk当中的，而其实现由各个数据库的服务商来提供，比如mysql的就写了`MySQL Connector`，那么问题就来了，DriverManager（也由jdk提供）要加载各个实现了Driver接口的实现类，然后进行管理，但是DriverManager由启动类加载器加载，只能记载JAVA_HOME的lib下文件，而其实现是由服务商提供的，由系统类加载器加载，这个时候就需要启动类加载器来委托子类来加载Driver实现，从而破坏了双亲委派。
    >
    >   破坏双亲委派的实现？
    >
    >   https://zhuanlan.zhihu.com/p/343563937
    >
    >   http://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%20Java%20%E8%99%9A%E6%8B%9F%E6%9C%BA-%E5%AE%8C/03%20%E5%A4%A7%E5%8E%82%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A%E4%BB%8E%E8%A6%86%E7%9B%96%20JDK%20%E7%9A%84%E7%B1%BB%E5%BC%80%E5%A7%8B%E6%8E%8C%E6%8F%A1%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6.md

*   [ ] 重载和重写在 JVM 层面是怎么鉴别的?

*   [ ] JVM当中的方法内联?

*   [ ] MySQL中的事务是怎么实现的?

*   [ ] 隔离级别的区别?都是怎么实现的?

    

*   [ ] 事务数组是什么?高水位指的是哪些?低水位指的是哪些?

*   [ ] Innodb 索引数据结构?

*   [ ] SQL 语句执行流程?分析器优化器执行器都是什么?

*   [ ] 回表?索引下推?

*   [ ] IOC 的初始化流程?

*   [ ] 为什么会有 SpringBoot 的出现?

*   [ ] 讲讲自动装配?

*   [x] 你更倾向于 MyBatis 还是 JPA?

*   [x] 这两个 ORM 的实现和区别?

*   [x] 问项目....

*   [x] 问实习...

*   [x] 你的大学生活,时间一般是怎样安排的?

*   [x] 你觉得你自己的大学生活充实么?

*   [x] 一般采用哪些方式学习?

*   [x] B 端业务和 C 端业务你更倾向于哪种?

3.06 部门 D 二面 110 min (过)
-----------------------------

*   [x] 自我介绍

*   [x] 本专业的成绩怎么样?

*   [x] 挂过科么?为什么会挂科?能不能总结一下这一次挂科?

*   [x] JVM内存模型概念?

*   [x] 你对方法区/元空间的理解?

*   [x] 堆中内存的分配?

*   [x] 永久带会涉及到 GC 回收么?

*   [x] 程序运行的时候,怎么监控内存使用情况?

*   [x] 程序运行的时候,怎么看堆栈信息?

*   [x] Java 类加载的过程?

*   [x] 魔数是什么?

*   [x] 为什么叫双亲委派?你有没有觉得这个名字怪怪的?

*   [x] 在一个类中调用了另一个类的私有方法能不能通过编译?

*   [x] ClassNotFoundException出现在哪些地方?

    >   当应用程序运行的过程中尝试<u>使用类加载器去加载Class文件的时候</u>，如果没有在classpath中查找到指定的类，就会抛出ClassNotFoundException。一般情况下，当我们使用Class.forName()或者ClassLoader.loadClass以及使用ClassLoader.findSystemClass()在运行时加载类的时候，如果类没有被找到，那么就会导致JVM抛出ClassNotFoundException。

*   [x] 假如说现在有一个 可执行的A.jar和 B.jar,他们都互相引用了对方,现在 B.jar 里面的某些类已经不在了,A还能启动么?

*   [ ] ldc,iconst,getstatic,ACC_FLAG 这几个指令都是什么意思?

    >   

*   [ ] IOC 的特性?你对 IOC 的理解?

*   [ ] 我们自己也可以实现 IOC 和 AOP,甚至是前置后置处理器,为什么还要用 Spring 提供的?

*   [ ] 怎样才能知道 Spring 的 IOC 容器已经完全初始化了?

*   [ ] 事件订阅的接口名字是什么?

*   [ ] 为什么我会问这个问题?为什么我们需要知道 Spring IOC 容器的初始化进度?

*   [ ] Spring 的后置处理器接口名字是什么?

*   [ ] AOP 和 IOC 的整合流程?

*   [ ] AOP 是怎么做动态代理的?

*   [x] CGLIB 是怎么操作字节码的?

*   [x] ASM 操作字节码的原理?

    >   对于需要手动操纵字节码的需求，可以使用ASM，它可以直接生产 .class字节码文件，也可以在**类被加载入JVM之前**动态修改类行为。ASM的应用场景有AOP（Cglib就是基于ASM）、热部署、修改其他jar包中的类等
    >
    >   1.   先通过ClassReader读取编译好的.class文件
    >   2.   其通过访问者模式（Visitor）对字节码进行修改，常见的Visitor类有：对方法进行修改的MethodVisitor，或者对变量进行修改的FieldVisitor等
    >   3.   通过ClassWriter重新构建编译修改后的字节码文件、或者将修改后的字节码文件输出到文件中
    >
    >   https://blog.csdn.net/hosaos/article/details/102931887

*   [ ] XML 的两种解析策略?两种有什么差异?

*   [x] 线程池参数?

*   [x] 任务提交到线程池之后会遇到哪些情况?

*   [x] 用银行取钱的例子给我讲讲线程池?

*   [x] sync 对应的字节码是什么?

*   [x] sync 锁静态方法和非静态方法锁的分别是什么对象?

*   [x] 为什么锁的对象不一样?

*   [ ] 为什么使用 Maven?

*   [ ] 一个 a.jar 引用了 c,版本是 1.0.0,b.jar 引用的 c 版本是 2.0.0,一个项目当中同时依赖了a 和 b,这时候依赖的 c 版本是哪一个?为什么?

*   [ ] Maven 仲裁策略有几步?

*   [x] 数据库的事务特性?

*   [x] 隔离级别的差异?为什么会有这种差异?

*   [x] 讲讲可重复读和读提交隔离级别和实现机制?

*   [x] 什么是"当前读"?

*   [x] 为什么项目当中要使用缓存?

*   [x] 为什么 Redis 这么快?

    >   单线程，IO多路复用，高效数据结构，基于内存，LRU淘汰策略

*   [x] Redis的持久化机制?

    >   AOF写命令，RDB写数据

*   [x] 在生成 RDB 的过程当中,还能继续进行写入么?

    >   RDB:可以继续写入，Redis就会借助操作系统提供的写时复制技术（Copy-On-Write, COW）
    >
    >   AOF***重写过程中发生的数据更改怎么去解决：***为了解决这种数据不一致问题，Redis服务器设置了一个**AOF重写缓冲区**，这个缓冲区在服务器创建子进程之后开始使用，当Redis服务器执行完一个写命令之后，它会同时将这个写命令发送给AOF缓冲区和AOF重写缓冲区
    >
    >   这也就是说，在子进程执行AOF重写期间，服务器进程需要执行以下三个工作：
    >
    >   1）执行客户端发来的命令。
    >
    >   2）将执行后的写命令追加到AOF缓冲区。
    >
    >   3）将执行后的写命令追加到AOF重写缓冲区

*   [x] 为什么 AOF 是数据先落盘再写日志?而数据库是先写日志再落盘?

    >   AOF在命令执行前，不知道命令是否正确，并且限制性可能会拖慢命令的执行速度，而数据库命令已经在分析器分析SQL的正确性了
    >
    >   但是也有两个缺点：1.如果刚执行完一个命令，还没有来得及记日志就宕机了，那么这个命令和相应的数据就有丢失的风险2.AOF虽然避免了对当前命令的阻塞，但可能会给下一个操作带来阻塞风险

*   [x] 哨兵的选主策略?一个哨兵是怎么知道其他哨兵的存在的?

    >   对于监视同一个服务器的多个Sentinel来说，一个Sentinel发送的信息会被其他Sentinel接收到，这些信息会被用于更新其他Sentinel对发送信息Sentinel的认知，也会被用于更新其他Sentinel对被监视服务器的认知。
    >
    >   当Sentinel通过频道信息发现一个新的Sentinel时，它不仅会为新Sentinel在sentinels字典中创建相应的实例结构，还会创建一个连向新Sentinel的命令连接，而新Sentinel也同样会创建连向这个Sentinel的命令连接，**最终监视同一主服务器的多个Sentinel将形成相互连接的网络**

*   [x] HashMap 八股文

*   [x] 红黑树的特点?

    >    *性质1：每个节点要么是黑色，要么是红色。*  
    >
    >     *性质2：根节点是黑色。*  
    >
    >     *性质3：每个叶子节点（NIL）是黑色。*  
    >
    >   ***性质4：每个红色结点的两个子结点一定都是黑色。*** 
    >
    >   ***性质5：任意一结点到每个叶子结点的路径都包含数量相同的黑结点。（保证这棵树尽量是平衡的。）***

*   [x] 三次握手和四次挥手的过程?

*   [x] TIMEWAIT 为什么要等待 2MSL?

* [x] 301 和 302 状态码的区别?

*   [x] 磁盘调度算法?

*   [x] 操作系统死锁?

*   [x] 进程和线程的区别?

* [x] 哪一种 IPC 最快?（进程内通信）

  > 共享内存最快，只需要进行两次复制（从文件到共享内存，共享内存到文件）
  >
  > 管道，消息队列都需要进行四次复制

* [x] 线程的几种状态?

*   [x] 进程调度策略?

*   [x] 三点十五分时针和分针的夹角?

3.07 部门 B 三面 35min (过)
---------------------------

*   [x] 问项目,问实习
*   [x] 你在项目当中担任的角色?
*   [x] 你觉得 TX 的氛围怎么样?
*   [x] 你一般几点走?
*   [x] 那边加班严重么?
*   [x] RPC 调用过程中,现在要在消费者这一端配置某种调用超时之后的服务,怎么才能判断是否已经超时呢?
*   [x] 关于超时时间的设定,怎么设置呢?
*   [x] 有几种超时的情况?对应不同的情况你会怎么办?
*   [x] 301 和 302 状态码的区别?
*   [x] HTTP 和 RPC 的关系?

### **阿里第一轮面试 （60 min）**

 阿里的第一轮面试主要考察基础知识，没有问到任何项目相关的问题。 

 开始是简单的自我介绍，大概 5 分钟的样子，然后就是连环炮式的问题。 

* [ ] 我看你有写到看过 Java 的源码，想问问 String 有什么样的了解 ？ 

* [ ] String 为什么是不可变得的，安全的 ？源码如何实现的 ？这样有什么好处 ？会造成什么问题 ？

  >  1.便于实现字符串池(如果字符串常量池中已经存在，则直接返回引用，不用新创建一个，如果字符串可变那么两个对象共同引用一个字符串，当其中一个字符串改变。另外一个也将改变)
  >
  > 2.在网络连接和数据库连接中字符串常常作为参数，例如，网络连接地址URL，文件路径path，反射机制所需要的String参数。其不可变性可以保证连接的安全性。如果字符串是可变的，黑客就有可能改变字符串指向对象的值，那么会引起很严重的安全问题。
  >
  > 3.由于String是不可变的，保证了hashcode的唯一性，于是在创建对象时其hashcode就可以放心的缓存了，不需要重新计算。
  >
  > 4.并发场景下，保证多线程安全

* [x] String 和 StringBuffer StringBuild 有什么区别 ？  StringBuffer 源码如何实现 ？ 

* [x] List 基本实现有哪些 ？ 

* [x] LinkedList 和 ArrayList 有什么区别 ？实际过程中如何使用这两种集合 ？ 

* [x] HashMap 的实现 ？为什么要用红黑树 ？ 

* [x] ConcurrentHashMap 实现，为什么是安全的，源码有看过吗 ？ 

* [x] CAS 如何保证的，底层如何实现的？ 

* [ ] 可见性是什么 ？知道如何实现的吗 ？基于底层硬件如何保证可见性 ？（这里主要说了寄存器，高速缓存，写缓存器实现机制） [volatile详解](../并发&多线程\源码分析\volatile.md)

* [ ] 你对 AQS 的理解 ? 它实现原理是什么？如何中断 ？中断后怎么处理 ？[](../并发&多线程\源码分析\AQS源码.md)

* [x] 说说线程池的工作原理 ？有哪些核心参数 ？如果是你自定义一个线程池，需要考虑哪些因素 ？ 

* [x] 因为当时我回答比较快，所有在完成上面的问题之后面试官又问了我数据库和虚拟机的问题 

* [x] Mysql 的索引实现有哪些 ？事务的特征 ？ 

* [x] MVCC 是什么 ？Mysql 调优具体如何操作 ？ 

* [x] explain 的用法，ref 代表什么意思 ？ index 代表什么意思 ？ 

* [x] JVM 的垃圾回收有哪些 ？年轻代老年代如何回收 ？ 

*   [x] 了解哪些常见的垃圾回收[算法]() ? 

### **第四轮面试 （50 min P9 级别）** 

 第四轮是 P9 级别的面试官，是一位做数据库的大神人物，面试主要分为两个阶段： 

 1：项目经历介绍，大概持续了有 15 分钟的样子，主要就是从项目角度考察表达逻辑和思考深度； 

 2：数据库知识，整个数据库的考察持续了大概 30 分钟的样子（因为在介绍的过程中，我说自己对数据库了解的比较深，是的，我又给自己挖坑了，碰到还是数据库大牛），主要面试问题如下： 

*   [ ]  事务的个人理解 ？ 

*   [ ]  原子性如何保证 ？主要从 undo log 角度回答，一致性如何保证 （双写机制）？ 

*   [ ]  持久性的实现，回答了 redo log ，以及数据库宕机后的持久化实现。 

*   [ ]  隔离性的实现 ？回答了锁机制和 MVCC，后面又具体介绍了 Mysql 常见的锁，比如：间隙锁，共享锁，排它锁，意向锁等等，还有 MVCC 在不同隔离级别的实现，版本控制链，ReadView 等。 

*   [ ]  BufferPool 内部的数据结构 

*   [ ]  InnoDB 的页结构，有哪些常见的压缩[算法]()，行记录通常有包含哪些字段 等等 

     本轮面试结束后，我就被通知拿到了阿里暑期实习的offer，很开心。 

###  **第 五 轮面试 （50 min P9 级别）**

 主要问的是项目经历，暑期没有来阿里实习的原因。简历上写了美团经历，所以项目的问题持续了有 20 分钟，问了当时团队主要做啥，大致的挑战，日活有多少 ？具体做了哪块的业务，有哪些收获。 

*   [ ]  最后做了一道[算法题]()，旋转图像，是 LeetCode 上的原题。 

 剩下的就是基础问题，大部分都是重复的，我就不再展开了，在后面我会单独梳理出每个科目的核心知识点， 




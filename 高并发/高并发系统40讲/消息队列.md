消息队列
--------

作用：削峰填谷，对业务逻辑做异步处理。

#### 如何保证消息仅仅被消费一次

##### 1.消息生产过程丢失

大多由于网络原因，这时需要消息重传，但是有可能因为多次发送造成重复。

##### 2.在消息队列中丢失信息

##### 3.消费过程中丢失信息

***保证消息的幂等性：***无论是生产端的幂等性保证方式，还是消费端通用的幂等性保证方式，它们的共同特点都是为每一个消息生成一个唯一的 ID，然后在使用这个消息的时候，先比对这个 ID 是否已经存在，如果存在，则认为消息已经被使用过。所以这种方式是一种标准的实现幂等的方式

##### 总结

总的来说，消息消费次数需要从三个方面：

>    网络抖动处理：重发；
>
>   消息队列服务器宕机：集群；
>
>   消息重复：使用唯一 ID 保证消息唯一性。



